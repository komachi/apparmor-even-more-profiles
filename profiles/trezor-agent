# Author: Anton Nesterov <anton@nesterov.cc>

#include <tunables/global>

@{trezor_agent_exec_path} = /{usr/,home/*/.local/,home/*/.local/pipx/venvs/trezor-agent/,}bin/trezor-agent
profile trezor-agent @{trezor_agent_exec_path} flags=(complain) {
  include <abstractions/base>
  include <abstractions/pipx>
  include <abstractions/devices-usb>

  /{usr/,}bin/git rPux,
  /{usr/,}bin/ssh rPux,
  /{usr/,}bin/scp rPux,

  deny network,
  
  include if exists <local/trezor-agent>
}
